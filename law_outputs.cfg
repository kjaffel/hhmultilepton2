#======================================
# output location and version settings
#======================================

[outputs]
# list of all used file systems
wlcg_file_systems: wlcg_fs, local_fs_manivald_user, wlcg_fs_desy_store, wlcg_fs_infn_redirector, wlcg_fs_global_redirector, wlcg_fs_manivald, local_eos_user, wlcg_fs_cernbox

# list of file systems used by columnflow.tasks.external.GetDatasetLFNs.iter_nano_files to
# look for the correct fs per nano input file (in that order)
lfn_sources: wlcg_fs_desy_store, wlcg_fs_infn_redirector, wlcg_fs_global_redirector

# output locations per task family
# for local targets : "local[, LOCAL_FS_NAME or STORE_PATH][, store_parts_modifier]"
# for remote targets: "wlcg[, WLCG_FS_NAME][, store_parts_modifier]"
# (when WLCG_FS_NAME is empty, the tasks' "default_wlcg_fs" attribute is used)
# the "store_parts_modifiers" can be the name of a function in the "store_parts_modifiers" aux dict
# of the analysis instance, which is called with an output's store parts of an output to modify them

# specific locations:
# lxplus users : base_fs: wlcg_mirrored, local_eos_user, wlcg_fs_cernbox
base_fs: wlcg, $WLCG_FILE_SYSTEM

# Common task patterns (used as templates)
common_cf_tasks: &common_cf_tasks
  {Calibrate,Select,Reduce}Events: &::era_fs
  MergeReducedEvents: &::era_fs
  Merge{Reduction,Selection}Stats: &::era_fs
  {Produce,Unite}Columns: &::era_fs
  *ML*: &::era_fs
  CreateDatacards: &::era_fs

common_hist_tasks: &common_hist_tasks
  {Create,Merge,MergeShifted}Histograms: &::era_fs

; 22pre era
22pre_fs:  &::base_fs
cfg_22pre_v1?__task_cf.{Calibrate,Select,Reduce}Events: &::22pre_fs
cfg_22pre_v1?__task_cf.MergeReducedEvents: &::22pre_fs
cfg_22pre_v1?__task_cf.Merge{Reduction,Selection}Stats: &::22pre_fs
cfg_22pre_v1?__task_cf.{Produce,Unite}Columns: &::22pre_fs
cfg_22pre_v1?__task_cf.*ML*: &::22pre_fs
cfg_22pre_v1?__task_cf.{Create,Merge,MergeShifted}Histograms: &::22pre_fs
cfg_22pre_v1?__task_cf.CreateDatacards: &::22pre_fs

; 22post era
22post_fs:  &::base_fs
cfg_22post_v1?__task_cf.{Calibrate,Select,Reduce}Events: &::22post_fs
cfg_22post_v1?__task_cf.MergeReducedEvents: &::22post_fs
cfg_22post_v1?__task_cf.Merge{Reduction,Selection}Stats: &::22post_fs
cfg_22post_v1?__task_cf.{Produce,Unite}Columns: &::22post_fs
cfg_22post_v1?__task_cf.*ML*: &::22post_fs
cfg_22post_v1?__task_cf.{Create,Merge,MergeShifted}Histograms: &::22post_fs
cfg_22post_v1?__task_cf.CreateDatacards: &::22post_fs

; 23pre era
23pre_fs:  &::base_fs
cfg_23pre_v1?__task_cf.{Calibrate,Select,Reduce}Events: &::23pre_fs
cfg_23pre_v1?__task_cf.MergeReducedEvents: &::23pre_fs
cfg_23pre_v1?__task_cf.Merge{Reduction,Selection}Stats: &::23pre_fs
cfg_23pre_v1?__task_cf.{Produce,Unite}Columns: &::23pre_fs
cfg_23pre_v1?__task_cf.*ML*: &::23pre_fs
cfg_23pre_v1?__task_cf.{Create,Merge,MergeShifted}Histograms: &::23pre_fs
cfg_23pre_v1?__task_cf.CreateDatacards: &::23pre_fs

; 23post era
23post_fs:  &::base_fs
cfg_23post_v1?__task_cf.{Calibrate,Select,Reduce}Events: &::23post_fs
cfg_23post_v1?__task_cf.MergeReducedEvents: &::23post_fs
cfg_23post_v1?__task_cf.Merge{Reduction,Selection}Stats: &::23post_fs
cfg_23post_v1?__task_cf.{Produce,Unite}Columns: &::23post_fs
cfg_23post_v1?__task_cf.*ML*: &::23post_fs
cfg_23post_v1?__task_cf.{Create,Merge,MergeShifted}Histograms: &::23post_fs
cfg_23post_v1?__task_cf.CreateDatacards: &::23post_fs

; 24 era
24_fs:  &::base_fs
cfg_24_v1?__task_cf.{Calibrate,Select,Reduce}Events: &::24_fs
cfg_24_v1?__task_cf.MergeReducedEvents: &::24_fs
cfg_24_v1?__task_cf.Merge{Reduction,Selection}Stats: &::24_fs
cfg_24_v1?__task_cf.{Produce,Unite}Columns: &::24_fs
cfg_24_v1?__task_cf.*ML*: &::24_fs
cfg_24_v1?__task_cf.{Create,Merge,MergeShifted}Histograms: &::24_fs
cfg_24_v1?__task_cf.CreateDatacards: &::24_fs


task_cf.BundleRepo: &::base_fs
task_cf.BundleSoftware: &::base_fs
task_cf.BundleBashSandbox: &::base_fs
task_cf.BundleCMSSWSandbox: &::base_fs
task_cf.BundleExternalFiles: &::base_fs
task_cf.GetDatasetLFNs: &::base_fs
task_cf.CalibrateEvents: &::base_fs
task_cf.SelectEvents: &::base_fs
task_cf.MergeSelectionStats: &::base_fs
task_cf.MergeSelectionMasks: &::base_fs
task_cf.ReduceEvents: &::base_fs
task_cf.MergeReductionStats: &::base_fs
task_cf.MergeReducedEvents: &::base_fs
task_cf.ProduceColumns: &::base_fs
task_cf.CreatePileupWeights: &::base_fs
task_cf.PrepareMLEvents: &::base_fs
task_cf.MergeMLEvents: &::base_fs
task_cf.MLTraining: &::base_fs
task_cf.MLEvaluation: &::base_fs
task_cf.UniteColumns: &::base_fs
task_cf.CreateSyncFile: &::base_fs
task_cf.PlotVariables1D : &::base_fs

[versions]
# updated categorization in default producer
# {22,23}{pre,post}_v14__cf.ProduceColumns__prod_default: prod6

# added eec and slightly adjusted selection
# {22,23}{pre,post}_v14__cf.CalibrateEvents: prod5
# {22,23}{pre,post}_v14__cf.{SelectEvents,MergeSelectionStats,ReduceEvents,MergeReductionStats,ProvideReducedEvents}: prod5
# {22,23}{pre,post}_v14__cf.ProduceColumns: prod5

# for first plots (16.1.2025)
# 22pre_v14__cf.CalibrateEvents: prod4
# 22pre_v14__cf.{SelectEvents,MergeSelectionStats,ReduceEvents,MergeReductionStats,ProvideReducedEvents}: prod4
# 22pre_v14__cf.ProduceColumns: prod4

